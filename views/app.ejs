<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>POS</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body class="bg-dark-subtle">
    <nav class="navbar bg-dark-subtle">
      <div class="container-fluid d-flex justify-content-between p-5 py-2">
        <a class="navbar-brand" href="/home">Hashmi Grain Ledger</a>
        <div>
        <a href="/new" class="btn btn-sm btn-secondary">Newuser</a>
        
        <a href="/" class="btn btn-sm btn-danger">Logout</a>
      </div>
      </div>
    </nav>
    <div class="container">
      <form
        action="/insertData"
        method="POST"
        class="d-flex m-5 justify-content-between"
      >
        <label for="productName">Product:</label>
        <select name="productName" id="productName" required class="mx-3 " autofocus>
          <optgroup label="Cookies">
          <option value="Oatmeal cookies">Oatmeal Cookies</option>
          <option value="Coconut oatmeal cookies">Coconut Oatmeal Cookies</option>
          <option value="Flex seed cookies">Flex Seed Cookies</option>
          <option value="Channa khatai">Channa Khatai</option>
          <option value="Naan khatai">Naan Khatai</option>
          <option value="Zeera cookies">Zeera Cookies</option>
        </optgroup>
          <!-- ----------------------------------- -->
          <optgroup label="Rice">
          <option value="Super karnal new">Super Karnal New</option>
          <option value="Super karnal old">Super Karnal Old</option>
          <option value="Kainat steam">Kainat Steam</option>
          <option value="Kainat seela">Kainat Seela</option>
          <option value="Kainat short grain">Kainat Short Grain</option>
          </optgroup>
          <!-- ------------------------------------->
          <optgroup label="Flour">
          <option value="Whole wheat flour">Whole Wheat Flour</option>
          <option value="Oat porridge">Oat Porridge</option>
          <option value="Wheat porridge">Wheat Porridge</option>
          <option value="Oat flour">Oat Flour</option>
          <option value="Besan">Besan</option>
          <option value="Meeda">Meeda</option>
          <option value="Pink salt">Pink Salt</option>
          </optgroup>
          <!-- ------------------------------------->
          <optgroup label="Spices">
          <option value="Red chilli">Red Chilli</option>
          <option value="Curshed red chilli">Crushed Red Chilli</option>
          <option value="Tumeric">Turmeric</option>
          <option value="Zeera">Zeera</option>
          <option value="Garam masala powder">Garam Masala Powder</option>
          <option value="Black pepper powder">Black Pepper Powder</option>
          <option value="Sukha Dhania">Sukha Dhania</option>
        </optgroup>
        </select>

        <input
          type="number"
          name="productQuantity"
          placeholder="Quantity"
          min="0" step="0.001"
          class="form-control mx-3"
          required
        />
        <input
          type="text"
          name="customerNumber"
          placeholder="Phone Number"
          
          class="form-control mx-3"
        />
        <input type="submit" value="Add" class="btn btn-sm btn-success mx-3 px-5" />
      </form>
<table class="table table-striped align-middle">
  <thead class="list-group mt-5 align-middle ">
    <tr class="list-group-item d-flex justify-content-around align-middle">
          <th> <span>invoice_num</span></th>
          <th><span>Order Date</span></th>
          <th><span>Product</span></th>
          <th><span>Price</span></th>
          <th>Delete</th>
        </li>
    </tr>
    </thead>
    <tbody class="list-group mt-5 align-middle">
      <% let total_price = 0 %>
      <% let date = new Date() %>
      <% list.forEach(list=>{ %>
      <tr class="list-group-item d-flex justify-content-around align-middle">
          <td><span><%= list.invoice_num %></span></td>
          <td><span><%= list.date.toDateString() %></span></td>
          <td><span><%= list.orderdetails %></span></td>
          <td><span><%= list.price %>rs</span></td>
          <td>
          <a
            href="/delete/<%= list.invoice_num %>"
            class="btn btn-sm btn-danger"
          >
            Delete</a
          ></td>
        <% total_price+=list.price %>
    </tr>
    <% }) %>
    </tbody>
    </table>
    <div class="end-container d-flex justify-content-between">
    <div class="m-5">
      <span class="m-5">Total Income: <%= total_price %>rs</span>
      <span class="m-5">Date: <%= date.toDateString() %></span>       
    </div>
    <div>
      <form action="/print" method="POST" class="m-5">
      <input type="text" name="phone" id="phone" placeholder="Phone no" required class="form-control">
      <input type="submit" value="Print" class="btn btn-sm btn-success mx-5 my-3 px-5">
    </form>
  </div>
</div>
    
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
